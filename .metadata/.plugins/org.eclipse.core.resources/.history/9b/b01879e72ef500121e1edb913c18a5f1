package Bing;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;

import org.json.JSONException;
import org.json.JSONObject;

public class SamplePost {

   public static void post(){
 
      try {
         URL                 url;
         URLConnection   urlConn;
         DataOutputStream    printout;
         DataInputStream     input;
		       
         //Make the actual connection
         url = new URL ("http://dev.virtualearth.net/REST/v1/Imagery/Map/Road/?key=AjuPzlE1V8n1TJJK7T7elqCZlfi6wdLGvjyYUn2aUsNJ5ORSwnc-ygOwBvTa9Czt");
         urlConn = url.openConnection();
         urlConn.setDoInput (true);
         urlConn.setDoOutput (true);
         urlConn.setUseCaches (false);
         urlConn.setRequestProperty("Content-Type", "text/plain");
         urlConn.setRequestProperty("charset",  "charset=utf-8");
			
         String content = "pp=38.889586530732335,-77.05010175704956;23;LM\r\n" +
                 "pp=38.88772364638439,-77.0472639799118;7;KM\r\n" +
                 "pp=38.890479451480054,-77.04744637012482;1;VM\r\n" +
                 "pp=38.8896854931628,-77.03519403934479;45;WM";
         
         urlConn.setRequestProperty("Content-Length", new Integer(content.getBytes().length).toString()); 
         printout = new DataOutputStream (urlConn.getOutputStream ());
         printout.writeBytes (content);
         printout.flush ();

         // Get response
			input = new DataInputStream (urlConn.getInputStream());
			int bt = -1;
			File file = new File("./photo.jpg");
			FileOutputStream fop = new FileOutputStream(file);
			// if file doesnt exists, then create it
			if (!file.exists()) {
				file.createNewFile();
			}
 
			while ((bt = input.read()) > -1) {
			
			fop.write(bt);
			
			}
			
			fop.flush();
			fop.close();
			System.out.println("Done");
 
			
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}    	  
      }
}


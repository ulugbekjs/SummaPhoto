import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.Writer;

import com.drew.imaging.ImageMetadataReader;
import com.drew.imaging.ImageProcessingException;
import com.drew.lang.GeoLocation;
import com.drew.metadata.Metadata;
import com.drew.metadata.exif.GpsDirectory;

import Common.*;
import Partitioning.*;


public class ExtractorOmri {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		
		try {
			// file to write to
			
			File directory = new File("C:/Users/omri/Documents/Omri/Workshop/WorkshopRepository/photos");
			if (!directory.exists())
			{
				System.out.println("No such directort");
				reutrn();
			}
			for (File file : directory.listFiles()) {


				// extract photo metadata
				Metadata metadata = null;
				try {
					metadata = ImageMetadataReader.readMetadata(file);
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				} catch (ImageProcessingException e) {
					continue;
				}

				//get location
				GpsDirectory directory1 = metadata.getDirectory(GpsDirectory.class);

				GeoLocation location = directory1.getGeoLocation();
				if (location == null) { // photo has not location
					continue;
				}


				bw.write(location.toString());
				bw.newLine();
			}


			bw.close();

			System.out.println("Done");

		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			return;

		}
	}
}

public class ExtractorOmri {

}
